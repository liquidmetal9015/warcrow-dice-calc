<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <title>Warcrow Calculator</title>
    <link rel="stylesheet" href="style.css?v=2">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>Warcrow Dice Calculator</h1>
        </header>

        <!-- Main Tabbed Interface -->
        <div class="tab-selector" style="visibility: hidden;">
            <button class="btn tab-btn active btn--primary" data-tab="analysis">Roll Calculator</button>
            <button class="btn tab-btn btn--outline" data-tab="combat">Face-to-Face</button>
            <button class="btn tab-btn btn--outline" data-tab="faces">Dice Reference</button>
        </div>

        <div class="main-content">
            <!-- Analysis Tab -->
            <div class="tab-content" id="analysis-tab">
                <div class="dice-pool-section">
                    <div class="pool-header">
                        <h2>Dice Pool Configuration</h2>
                    </div>
                    
                    <div class="dice-selector">
                        <h3>Attack Dice</h3>
                        <div class="dice-row">
                            <div class="dice-type" data-color="Red">
                                <div class="dice-icon red-die"></div>
                                <div class="dice-controls">
                                    <button class="btn btn--sm dice-btn-minus">-</button>
                                    <span class="dice-count">0</span>
                                    <button class="btn btn--sm dice-btn-plus">+</button>
                                </div>
                                <div class="dice-label">Red</div>
                            </div>
                            <div class="dice-type" data-color="Orange">
                                <div class="dice-icon orange-die"></div>
                                <div class="dice-controls">
                                    <button class="btn btn--sm dice-btn-minus">-</button>
                                    <span class="dice-count">0</span>
                                    <button class="btn btn--sm dice-btn-plus">+</button>
                                </div>
                                <div class="dice-label">Orange</div>
                            </div>
                            <div class="dice-type" data-color="Yellow">
                                <div class="dice-icon yellow-die"></div>
                                <div class="dice-controls">
                                    <button class="btn btn--sm dice-btn-minus">-</button>
                                    <span class="dice-count">0</span>
                                    <button class="btn btn--sm dice-btn-plus">+</button>
                                </div>
                                <div class="dice-label">Yellow</div>
                            </div>
                        </div>

                        <h3>Defense Dice</h3>
                        <div class="dice-row">
                            <div class="dice-type" data-color="Green">
                                <div class="dice-icon green-die"></div>
                                <div class="dice-controls">
                                    <button class="btn btn--sm dice-btn-minus">-</button>
                                    <span class="dice-count">0</span>
                                    <button class="btn btn--sm dice-btn-plus">+</button>
                                </div>
                                <div class="dice-label">Green</div>
                            </div>
                            <div class="dice-type" data-color="Blue">
                                <div class="dice-icon blue-die"></div>
                                <div class="dice-controls">
                                    <button class="btn btn--sm dice-btn-minus">-</button>
                                    <span class="dice-count">0</span>
                                    <button class="btn btn--sm dice-btn-plus">+</button>
                                </div>
                                <div class="dice-label">Blue</div>
                            </div>
                            <div class="dice-type" data-color="Black">
                                <div class="dice-icon black-die"></div>
                                <div class="dice-controls">
                                    <button class="btn btn--sm dice-btn-minus">-</button>
                                    <span class="dice-count">0</span>
                                    <button class="btn btn--sm dice-btn-plus">+</button>
                                </div>
                                <div class="dice-label">Black</div>
                            </div>
                        </div>
                    </div>

                    <div class="pool-actions">
                        <button class="btn btn--secondary" id="reset-pool">Reset Pool</button>
                    </div>
                </div>


                <!-- Results Display -->
                <div class="results-section">
                    <div class="results-header">
                        <h2>Probability Analysis</h2>
                        <div class="results-timestamp" id="results-timestamp"></div>
                    </div>
                    
                    <div class="symbol-summary" id="symbol-summary">
                        <div class="loading-placeholder">
                            <div class="skeleton-card">
                                <div class="skeleton-line"></div>
                                <div class="skeleton-line short"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Distribution Viewer -->
                    <div class="chart-section">
                        <h3>Symbol Distributions</h3>
                        <div id="analysis-charts">
                            <div class="chart-block">
                                <div class="chart-controls">
                                    <div class="segmented-control">
                                        <input type="radio" id="mode-hits-filled" name="analysis-mode-hits" value="filled" checked>
                                        <label for="mode-hits-filled">filled</label>
                                        <input type="radio" id="mode-hits-hollow" name="analysis-mode-hits" value="hollow">
                                        <label for="mode-hits-hollow">hollow</label>
                                        <input type="radio" id="mode-hits-both" name="analysis-mode-hits" value="both">
                                        <label for="mode-hits-both">hollow+filled</label>
                                    </div>
                                </div>
                                <div class="chart-container" style="position: relative; height: 240px; width: 100%;">
                                    <canvas id="chart-hits"></canvas>
                                </div>
                            </div>

                            <div class="chart-block" style="margin-top: 16px;">
                                <div class="chart-controls">
                                    <div class="segmented-control">
                                        <input type="radio" id="mode-blocks-filled" name="analysis-mode-blocks" value="filled" checked>
                                        <label for="mode-blocks-filled">filled</label>
                                        <input type="radio" id="mode-blocks-hollow" name="analysis-mode-blocks" value="hollow">
                                        <label for="mode-blocks-hollow">hollow</label>
                                        <input type="radio" id="mode-blocks-both" name="analysis-mode-blocks" value="both">
                                        <label for="mode-blocks-both">hollow+filled</label>
                                    </div>
                                </div>
                                <div class="chart-container" style="position: relative; height: 240px; width: 100%;">
                                    <canvas id="chart-blocks"></canvas>
                                </div>
                            </div>

                            <div class="chart-block" style="margin-top: 16px;">
                                <div class="chart-controls">
                                    <div class="segmented-control">
                                        <input type="radio" id="mode-specials-filled" name="analysis-mode-specials" value="filled" checked>
                                        <label for="mode-specials-filled">filled</label>
                                        <input type="radio" id="mode-specials-hollow" name="analysis-mode-specials" value="hollow">
                                        <label for="mode-specials-hollow">hollow</label>
                                        <input type="radio" id="mode-specials-both" name="analysis-mode-specials" value="both">
                                        <label for="mode-specials-both">hollow+filled</label>
                                    </div>
                                </div>
                                <div class="chart-container" style="position: relative; height: 240px; width: 100%;">
                                    <canvas id="chart-specials"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Warning removed: auto-run always keeps results fresh -->


            </div>

            <!-- Combat Tab -->
            <div class="tab-content hidden" id="combat-tab">
                <div class="combat-section">
                    <div class="combat-setup">
                        <div class="attacker-setup">
                            <div class="combat-header">
                                <h2>‚öîÔ∏è Attacker</h2>
                                <div class="elite-toggle">
                                    <label class="elite-label">
                                        <input type="checkbox" id="attacker-elite" class="elite-checkbox">
                                        <span class="elite-text">Elite</span>
                                    </label>
                                </div>
                            </div>
                            <div class="dice-selector">
                                <div class="dice-row">
                                    <div class="dice-type" data-color="Red" data-pool="attacker">
                                        <div class="dice-icon red-die"></div>
                                        <div class="dice-controls">
                                            <button class="btn btn--sm dice-btn-minus">-</button>
                                            <span class="dice-count">0</span>
                                            <button class="btn btn--sm dice-btn-plus">+</button>
                                        </div>
                                        <div class="dice-label">Red</div>
                                    </div>
                                    <div class="dice-type" data-color="Orange" data-pool="attacker">
                                        <div class="dice-icon orange-die">Ô∏è</div>
                                        <div class="dice-controls">
                                            <button class="btn btn--sm dice-btn-minus">-</button>
                                            <span class="dice-count">0</span>
                                            <button class="btn btn--sm dice-btn-plus">+</button>
                                        </div>
                                        <div class="dice-label">Orange</div>
                                    </div>
                                    <div class="dice-type" data-color="Yellow" data-pool="attacker">
                                        <div class="dice-icon yellow-die"></div>
                                        <div class="dice-controls">
                                            <button class="btn btn--sm dice-btn-minus">-</button>
                                            <span class="dice-count">0</span>
                                            <button class="btn btn--sm dice-btn-plus">+</button>
                                        </div>
                                        <div class="dice-label">Yellow</div>
                                    </div>
                                    <div class="dice-type" data-color="Green" data-pool="attacker">
                                        <div class="dice-icon green-die"></div>
                                        <div class="dice-controls">
                                            <button class="btn btn--sm dice-btn-minus">-</button>
                                            <span class="dice-count">0</span>
                                            <button class="btn btn--sm dice-btn-plus">+</button>
                                        </div>
                                        <div class="dice-label">Green</div>
                                    </div>
                                    <div class="dice-type" data-color="Blue" data-pool="attacker">
                                        <div class="dice-icon blue-die"></div>
                                        <div class="dice-controls">
                                            <button class="btn btn--sm dice-btn-minus">-</button>
                                            <span class="dice-count">0</span>
                                            <button class="btn btn--sm dice-btn-plus">+</button>
                                        </div>
                                        <div class="dice-label">Blue</div>
                                    </div>
                                    <div class="dice-type" data-color="Black" data-pool="attacker">
                                        <div class="dice-icon black-die"></div>
                                        <div class="dice-controls">
                                            <button class="btn btn--sm dice-btn-minus">-</button>
                                            <span class="dice-count">0</span>
                                            <button class="btn btn--sm dice-btn-plus">+</button>
                                        </div>
                                        <div class="dice-label">Black</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="vs-divider">VS</div>

                        <div class="defender-setup">
                            <div class="combat-header">
                                <h2>üõ°Ô∏è Defender</h2>
                                <div class="elite-toggle">
                                    <label class="elite-label">
                                        <input type="checkbox" id="defender-elite" class="elite-checkbox">
                                        <span class="elite-text">Elite</span>
                                    </label>
                                </div>
                            </div>
                            <div class="dice-selector">
                                <div class="dice-row">
                                    <div class="dice-type" data-color="Green" data-pool="defender">
                                        <div class="dice-icon green-die"></div>
                                        <div class="dice-controls">
                                            <button class="btn btn--sm dice-btn-minus">-</button>
                                            <span class="dice-count">0</span>
                                            <button class="btn btn--sm dice-btn-plus">+</button>
                                        </div>
                                        <div class="dice-label">Green</div>
                                    </div>
                                    <div class="dice-type" data-color="Blue" data-pool="defender">
                                        <div class="dice-icon blue-die"></div>
                                        <div class="dice-controls">
                                            <button class="btn btn--sm dice-btn-minus">-</button>
                                            <span class="dice-count">0</span>
                                            <button class="btn btn--sm dice-btn-plus">+</button>
                                        </div>
                                        <div class="dice-label">Blue</div>
                                    </div>
                                    <div class="dice-type" data-color="Black" data-pool="defender">
                                        <div class="dice-icon black-die"></div>
                                        <div class="dice-controls">
                                            <button class="btn btn--sm dice-btn-minus">-</button>
                                            <span class="dice-count">0</span>
                                            <button class="btn btn--sm dice-btn-plus">+</button>
                                        </div>
                                        <div class="dice-label">Black</div>
                                    </div>
                                    <div class="dice-type" data-color="Red" data-pool="defender">
                                        <div class="dice-icon red-die"></div>
                                        <div class="dice-controls">
                                            <button class="btn btn--sm dice-btn-minus">-</button>
                                            <span class="dice-count">0</span>
                                            <button class="btn btn--sm dice-btn-plus">+</button>
                                        </div>
                                        <div class="dice-label">Red</div>
                                    </div>
                                    <div class="dice-type" data-color="Orange" data-pool="defender">
                                        <div class="dice-icon orange-die"></div>
                                        <div class="dice-controls">
                                            <button class="btn btn--sm dice-btn-minus">-</button>
                                            <span class="dice-count">0</span>
                                            <button class="btn btn--sm dice-btn-plus">+</button>
                                        </div>
                                        <div class="dice-label">Orange</div>
                                    </div>
                                    <div class="dice-type" data-color="Yellow" data-pool="defender">
                                        <div class="dice-icon yellow-die"></div>
                                        <div class="dice-controls">
                                            <button class="btn btn--sm dice-btn-minus">-</button>
                                            <span class="dice-count">0</span>
                                            <button class="btn btn--sm dice-btn-plus">+</button>
                                        </div>
                                        <div class="dice-label">Yellow</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="pool-actions">
                            <button class="btn btn--secondary" id="reset-combat">Reset Combat</button>
                        </div>
                    </div>


                    <div class="combat-results">
                        <div class="results-header">
                            <h2>Combat Analysis</h2>
                            <div class="results-timestamp" id="combat-results-timestamp"></div>
                        </div>
                        
                        <div class="combat-summary" id="combat-summary">
                            <div class="loading-placeholder">
                                <div class="skeleton-card">
                                    <div class="skeleton-line"></div>
                                    <div class="skeleton-line short"></div>
                                </div>
                            </div>
                        </div>

                        <div class="chart-container" style="position: relative; height: 240px; width: 100%;">
                            <canvas id="combat-wounds-attacker"></canvas>
                        </div>
                        <div class="chart-container" style="position: relative; height: 240px; width: 100%; margin-top: 16px;">
                            <canvas id="combat-wounds-defender"></canvas>
                        </div>
                        <div class="chart-container" style="position: relative; height: 240px; width: 100%; margin-top: 16px;">
                            <canvas id="combat-specials-attacker"></canvas>
                        </div>
                        <div class="chart-container" style="position: relative; height: 240px; width: 100%; margin-top: 16px;">
                            <canvas id="combat-specials-defender"></canvas>
                        </div>
                    </div>

                    <!-- Warning removed: auto-run always keeps results fresh -->

                </div>
            </div>

            <!-- Dice Faces Tab -->
            <div class="tab-content hidden" id="faces-tab">
                <div class="faces-section">
                    <h2>Dice Face Reference</h2>
                    <p class="faces-description">Complete reference showing every face of every die with exact symbol compositions</p>
                    
                    <div class="dice-face-grid">
                        <div class="die-reference" data-color="Red">
                            <div class="die-header">
                                <div class="dice-icon red-die"></div>
                                <div class="die-info">
                                    <h3>Red Attack Die</h3>
                                    <p>High reliability attack die</p>
                                </div>
                            </div>
                            <div class="face-list">
                                <div class="face-item">Face 1: ‚öîÔ∏è Success</div>
                                <div class="face-item">Face 2: ‚öîÔ∏è Success</div>
                                <div class="face-item">Face 3: ‚öîÔ∏è Success</div>
                                <div class="face-item">Face 4: ‚öîÔ∏è Success</div>
                                <div class="face-item">Face 5: ‚öîÔ∏è Success</div>
                                <div class="face-item">Face 6: ‚öîÔ∏è‚öîÔ∏è Double Success</div>
                                <div class="face-item">Face 7: ‚öîÔ∏è Success + ‚ö° Special</div>
                                <div class="face-item">Face 8: ‚≠ï Hollow Success</div>
                            </div>
                        </div>

                        <div class="die-reference" data-color="Orange">
                            <div class="die-header">
                                <div class="dice-icon orange-die">‚öîÔ∏è</div>
                                <div class="die-info">
                                    <h3>Orange Attack Die</h3>
                                    <p>Balanced attack with specials</p>
                                </div>
                            </div>
                            <div class="face-list">
                                <div class="face-item">Face 1: ‚öîÔ∏è Success</div>
                                <div class="face-item">Face 2: ‚öîÔ∏è Success</div>
                                <div class="face-item">Face 3: ‚öîÔ∏è Success</div>
                                <div class="face-item">Face 4: ‚öîÔ∏è Success</div>
                                <div class="face-item">Face 5: ‚öîÔ∏è Success + ‚ö° Special</div>
                                <div class="face-item">Face 6: ‚ö° Special</div>
                                <div class="face-item">Face 7: ‚ö° Special + ‚≠ï Hollow Special</div>
                                <div class="face-item">Face 8: ‚≠ï Hollow Success + ‚≠ï Hollow Special</div>
                            </div>
                        </div>

                        <div class="die-reference" data-color="Yellow">
                            <div class="die-header">
                                <div class="dice-icon yellow-die">‚ö°</div>
                                <div class="die-info">
                                    <h3>Yellow Attack Die</h3>
                                    <p>Special-focused ability die</p>
                                </div>
                            </div>
                            <div class="face-list">
                                <div class="face-item">Face 1: ‚öîÔ∏è Success + ‚ö° Special</div>
                                <div class="face-item">Face 2: ‚öîÔ∏è Success + ‚ö° Special</div>
                                <div class="face-item">Face 3: ‚öîÔ∏è Success + ‚ö° Special</div>
                                <div class="face-item">Face 4: ‚ö° Special</div>
                                <div class="face-item">Face 5: ‚ö° Special</div>
                                <div class="face-item">Face 6: ‚ö° Special + ‚≠ï Hollow Success</div>
                                <div class="face-item">Face 7: ‚≠ï Hollow Success + ‚≠ï Hollow Special</div>
                                <div class="face-item">Face 8: ‚ö° Special</div>
                            </div>
                        </div>

                        <div class="die-reference" data-color="Green">
                            <div class="die-header">
                                <div class="dice-icon green-die">üõ°Ô∏è</div>
                                <div class="die-info">
                                    <h3>Green Defense Die</h3>
                                    <p>High reliability defense die</p>
                                </div>
                            </div>
                            <div class="face-list">
                                <div class="face-item">Face 1: üõ°Ô∏è Block</div>
                                <div class="face-item">Face 2: üõ°Ô∏è Block</div>
                                <div class="face-item">Face 3: üõ°Ô∏è Block</div>
                                <div class="face-item">Face 4: üõ°Ô∏è Block</div>
                                <div class="face-item">Face 5: üõ°Ô∏è Block</div>
                                <div class="face-item">Face 6: üõ°Ô∏è Block + ‚ö° Special</div>
                                <div class="face-item">Face 7: üõ°Ô∏èüõ°Ô∏è Double Block + ‚ö° Special</div>
                                <div class="face-item">Face 8: ‚≠ï Hollow Block + ‚≠ï Hollow Special</div>
                            </div>
                        </div>

                        <div class="die-reference" data-color="Blue">
                            <div class="die-header">
                                <div class="dice-icon blue-die">üõ°Ô∏è</div>
                                <div class="die-info">
                                    <h3>Blue Defense Die</h3>
                                    <p>Balanced defense with specials</p>
                                </div>
                            </div>
                            <div class="face-list">
                                <div class="face-item">Face 1: üõ°Ô∏è Block + ‚ö° Special</div>
                                <div class="face-item">Face 2: üõ°Ô∏è Block + ‚ö° Special</div>
                                <div class="face-item">Face 3: üõ°Ô∏è Block + ‚ö° Special</div>
                                <div class="face-item">Face 4: üõ°Ô∏è Block + ‚ö° Special</div>
                                <div class="face-item">Face 5: ‚ö° Special</div>
                                <div class="face-item">Face 6: ‚ö° Special</div>
                                <div class="face-item">Face 7: ‚≠ï Hollow Block + ‚≠ï Hollow Special</div>
                                <div class="face-item">Face 8: ‚≠ï Hollow Special</div>
                            </div>
                        </div>

                        <div class="die-reference" data-color="Black">
                            <div class="die-header">
                                <div class="dice-icon black-die">‚ö°</div>
                                <div class="die-info">
                                    <h3>Black Defense Die</h3>
                                    <p>Special-focused defense die</p>
                                </div>
                            </div>
                            <div class="face-list">
                                <div class="face-item">Face 1: üõ°Ô∏è Block + ‚ö° Special</div>
                                <div class="face-item">Face 2: üõ°Ô∏è Block + ‚ö° Special</div>
                                <div class="face-item">Face 3: ‚ö° Special</div>
                                <div class="face-item">Face 4: ‚ö° Special</div>
                                <div class="face-item">Face 5: ‚ö° Special</div>
                                <div class="face-item">Face 6: ‚ö° Special + ‚≠ï Hollow Block</div>
                                <div class="face-item">Face 7: ‚≠ï Hollow Block + ‚≠ï Hollow Special</div>
                                <div class="face-item">Face 8: ‚ö° Special</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script type="module" src="app.js?v=2"></script>
</body>
</html>